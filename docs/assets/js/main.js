"use strict";const elementInputSearch=document.querySelector("#inputSearch"),elementButton=document.querySelector("#buttonSearch"),elementContainer=document.querySelector("#seriesContainer"),elementFavouriteList=document.querySelector("#favouriteList"),elementFavouriteContainer=document.querySelector("#favouritesContainer"),elementForm=document.querySelector("#form"),urlBase="http://api.tvmaze.com/search/shows?q=";let favouriteSeries=[];const connectToApi=()=>{const e=elementInputSearch.value.toLowerCase();fetch(urlBase+e).then(e=>e.json()).then(e=>paintSeries(e))};function loadSeriesHandler(){null!==localStorage.getItem("allFavSeries")?(favouriteSeries=JSON.parse(localStorage.getItem(allFavSeries)),addNewFavourite(favouriteSeries)):(paintSeries(),connectToApi())}const paintSeries=e=>{for(let t=0;t<e.length;t++){const n=e[t].show.name,a=e[t].show.image,i=document.createElement("div"),r=document.createElement("img"),o=document.createElement("span"),s=document.createTextNode(n);i.classList.add("serie-content"),r.classList.add("serie-img"),o.classList.add("serie-text"),r.src=null===a?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":a.original,o.appendChild(s),i.appendChild(r),i.appendChild(o),elementContainer.appendChild(i),i.addEventListener("click",clickFavourite)}};function clickFavourite(e){const t=e.currentTarget;t.classList.toggle("click-select");const n=t.firstChild.src,a={name:t.lastChild.innerHTML,image:n};t.classList.contains("click-select")&&favouriteSeries.push(a),addNewFavourite(),localStorage.setItem("allFavSeries",JSON.stringify(favouriteSeries))}const addNewFavourite=()=>{elementFavouriteContainer.innerHTML="",elementFavouriteList.innerHTML="",elementFavouriteList.classList.add("favourite-list"),elementFavouriteContainer.appendChild(elementFavouriteList);for(let e of favouriteSeries){const t=e.name,n=e.image,a=document.createElement("li"),i=document.createElement("span"),r=document.createElement("img"),o=document.createElement("span"),s=document.createTextNode(t);o.innerHTML="X",o.classList.add("icon"),i.classList.add("favourite-name"),r.classList.add("favourite-image"),a.classList.add("favourite-content"),r.src=n,i.appendChild(s),a.appendChild(r),a.appendChild(i),a.appendChild(o),elementFavouriteList.appendChild(a)}};elementButton.addEventListener("click",connectToApi);