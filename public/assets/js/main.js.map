{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n//Declaro los elementos que voy a necesitar\nconst elementInputSearch = document.querySelector('#inputSearch');\nconst elementButton = document.querySelector('#buttonSearch');\nconst elementContainer = document.querySelector('#seriesContainer');\nconst elementFavouriteList = document.querySelector('#favouriteList');\nconst elementFavouriteContainer = document.querySelector('#favouritesContainer');\nconst elementForm = document.querySelector('#form');\n\n//Meto mi url en una constante\nconst urlBase = 'http://api.tvmaze.com/search/shows?q=';\n//Declaro en una variable mi array vacío\nlet favouriteSeries = [];\n\n\nconst connectToApi = () => {\nconst inputValue = elementInputSearch.value.toLowerCase();\n  fetch(urlBase + inputValue)\n  .then(response => response.json())\n  .then(dataSearch => paintSeries(dataSearch))\n};\n\n//Compruebo si mi localStorage está vacío. Si no lo está, le digo que lo parsee, sino le digo que ejecute la función de conectarse a la API\nfunction loadSeriesHandler () {\n  if(localStorage.getItem(\"allFavSeries\") !== null){\n    favouriteSeries = JSON.parse(localStorage.getItem(allFavSeries));\n    addNewFavourite(favouriteSeries);\n  } else {\n    paintList();\n    connectToApi();\n  }\n}\n\n\n//Creo una función que pinte las series con los datos que recojo de la API.\nconst paintSeries = (dataSearch) => {\n  for (let i = 0; i < dataSearch.length; i++) {\n    const serieName = dataSearch[i].show.name;\n    const serieImage = dataSearch[i].show.image;\n\n    const elementDiv = document.createElement ('div');\n    const elementImg = document.createElement('img');\n    const elementSpan = document.createElement('span');\n    const spanText = document.createTextNode(serieName);\n    \n    elementImg.style = 'width: 100px';\n\n    //Necesito un condicional para la imagen. En caso de que no exista, por defecto píntame esto, sino, pintame la imagen que me traigo de la api (mediano u original).\n    if(serieImage === null){\n      elementImg.src = \"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\";\n    } else {\n      elementImg.src = serieImage.original || serieImage.medium;\n    }\n\n    elementSpan.appendChild(spanText);\n    elementDiv.appendChild(elementSpan);\n    elementDiv.appendChild(elementImg);\n    elementContainer.appendChild(elementDiv);    \n    \n    //Al pinchar sobre el div que contiene la imagen y el nombre de la serie, tenemos que añadir esta a favoritos.\n    elementDiv.addEventListener('click', addNewFavourite);\n\n    const seriesObject = {\n      \"name\" : serieName,\n      \"image\" : serieImage,\n    }\n    favouriteSeries.push(seriesObject);\n\n  };\n  \n}\n\nconst paintList = (array) => {\n  for(let item of array) {\n    addNewFavourite(item)\n  }\n}\n\nconst addNewFavourite = (obj) =>{\n  const favouriteLi = document.createElement('li');\n  favouriteLi.innerHTML = `<img src=${obj.img}><span>${obj.name}</span>`;\n  elementFavouriteList.appendChild(favouriteLi);\n\n  \n\n  localStorage.setItem(\"allFavSeries\",JSON.stringify(favouriteSeries));\n\n};\n\n  // for(let item of favouriteSeries){\n  //   const favImgData = item.img;\n  //   const favNameData = item.name;\n\n  //   const favouriteLi = document.createElement('li');\n  //   const favouriteName = document.createElement('span');\n  //   const favouriteImage = document.createElement('img');\n  //   favouriteName.classList.add('fav-name');\n  //   favouriteImage.classList.add('fav-image');\n  //   favouriteLi.classList.add('item');\n  //   favouriteImage.src = favImgData;\n  //   favouriteName.innerHTML = favNameData;\n  //   favouriteLi.appendChild(favouriteImage);\n  //   favouriteLi.appendChild(favouriteName);\n  //   elementFavouriteList.appendChild(favouriteLi);\n    \n\n    \n    // const newElement = event.currentTarget;\n    // const selectSpan = newElement.querySelector('.fav-name');\n    // const selectImg = newElement.querySelector('.fav-image');\n    // newElement.classList.toggle('color-brackground');\n    // if(newElement.classList.contains('color-brackground')){\n    //   const seriesObject = {\n    //     \"name\" : selectSpan.innerHTML,\n    //     \"img\" : selectImg.src,\n    //   }\n    // } \n  \n    \n\n// const addNewSerie = (seriesObject) =>{\n//   elementFavouriteList.innerHTML = `<img src=${seriesObject.Image}><span>${seriesObject.Name}</span>`\n// }\n\n//Función para hacer la búsqueda cuando pulso enter\nconst submitHandler = (event) => {\n  event.preventDefault();\n  connectToApi();\n}\n\nelementForm.addEventListener('submit', submitHandler);\nelementButton.addEventListener('click', connectToApi);"]}