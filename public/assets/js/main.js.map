{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n//Declaro los elementos que voy a necesitar\nconst elementInputSearch = document.querySelector('#inputSearch');\nconst elementButton = document.querySelector('#buttonSearch');\nconst elementContainer = document.querySelector('#seriesContainer');\nconst elementFavouriteList = document.querySelector('#favouriteList');\nconst elementFavouriteContainer = document.querySelector('#favouritesContainer');\nconst elementForm = document.querySelector('#form');\n\n//Meto mi url en una constante\nconst urlBase = 'http://api.tvmaze.com/search/shows?q=';\n//Declaro en una variable mi array vacío\nlet favouriteSeries = [];\n\n//Función para conectarse a la Api\nconst connectToApi = () => {\nconst inputValue = elementInputSearch.value.toLowerCase();\n  fetch(urlBase + inputValue)\n  .then(response => response.json())\n  .then(dataSearch => paintSeries(dataSearch))\n};\n\n//Compruebo si mi localStorage está vacío. Si no lo está, le digo que lo parsee, sino le digo que ejecute la función de conectarse a la API\nfunction loadSeriesHandler () {\n  if(localStorage.getItem(\"allFavSeries\") !== null){\n    favouriteSeries = JSON.parse(localStorage.getItem(allFavSeries));\n    addNewFavourite(favouriteSeries);\n  } else {\n    paintSeries();\n    connectToApi();\n  };\n};\n\n\n//Creo una función que pinte las series con los datos que recojo de la API.\nconst paintSeries = (dataSearch) => {\n  for (let i = 0; i < dataSearch.length; i++) {\n    const serieName = dataSearch[i].show.name;\n    const serieImage = dataSearch[i].show.image;\n    const elementDiv = document.createElement ('div');\n    const elementImg = document.createElement('img');\n    const elementSpan = document.createElement('span');\n    const spanText = document.createTextNode(serieName);\n    elementDiv.classList.add('serie-content');\n    elementImg.classList.add('serie-img');\n    elementSpan.classList.add('serie-text');\n\n    //Necesito un condicional para la imagen. En caso de que no exista, por defecto píntame esto, sino, pintame la imagen que me traigo de la api.\n    if(serieImage === null){\n      elementImg.src = \"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\";\n    } else {\n      elementImg.src = serieImage.original;\n    };\n\n    elementSpan.appendChild(spanText);\n    elementDiv.appendChild(elementImg);\n    elementDiv.appendChild(elementSpan);\n    elementContainer.appendChild(elementDiv);    \n    \n    //Al pinchar sobre el div que contiene la imagen y el nombre de la serie, tenemos que añadir esta a favoritos.\n    elementDiv.addEventListener('click', clickFavourite);\n  };\n};\n\n\n\n//Función para añadir o quitar el fondo de la serie cuando hago click en el div\nfunction clickFavourite (event) {\n  const selectSerie = event.currentTarget;\n  selectSerie.classList.toggle('click-select');\n  const image =  selectSerie.firstChild.src;\n  const name = selectSerie.lastChild.innerHTML;\n \n  //Declaro mi objeto\n  const seriesObject = {\n    \"name\": name,\n    \"image\": image,\n  };\n  \n  //Condicional para que añada el objeto al array cuando tiene la clase seleccionada y la añada a favoritos.\n  if(selectSerie.classList.contains('click-select')){\n    favouriteSeries.push(seriesObject);\n  };\n  addNewFavourite();\n  \n  //Guardo en localStorage mi array.\n  localStorage.setItem(\"allFavSeries\",JSON.stringify(favouriteSeries));\n};\n\n//Función para que al añadir la serie me añada imagen y título en favoritos.\nconst addNewFavourite = () =>{\n  \n  elementFavouriteContainer.innerHTML = '';\n  elementFavouriteList.innerHTML = '';\n  elementFavouriteList.classList.add('favourite-list');\n  elementFavouriteContainer.appendChild(elementFavouriteList);\n\n  for(let item of favouriteSeries){\n    const favName = item.name;\n    const favImage = item.image;\n\n    const favouriteLi = document.createElement('li');\n    const nameFavourite = document.createElement('span');\n    const imageFavourite = document.createElement('img');\n    const closeFavourite = document.createElement('span');\n    const nameContent = document.createTextNode(favName);\n    closeFavourite.innerHTML = 'X';\n    closeFavourite.classList.add('icon');\n    nameFavourite.classList.add('favourite-name');\n    imageFavourite.classList.add('favourite-image');\n    favouriteLi.classList.add('favourite-content');\n    imageFavourite.src = favImage;\n\n    nameFavourite.appendChild(nameContent);\n    favouriteLi.appendChild(imageFavourite);\n    favouriteLi.appendChild(nameFavourite);\n    favouriteLi.appendChild(closeFavourite);\n    elementFavouriteList.appendChild(favouriteLi);\n  };\n}; \n\n  \n//Ejecuto mi listener sobre el elemento, en este caso el botón para que genere la función de conectarse a la Api.\nelementButton.addEventListener('click', connectToApi);"]}